import{r as p,j as e,l as o,s as ve,a as Le,b as Ie,C as S,c as Se,d as we,e as Ee,f as Pe,g as _e,h as ke,i as Me,k as Re,m as Ae,n as Q,o as Fe,p as ze,q as Be,t as Ke,u as De,v as Ve,w as Ne,x as Oe,y as He,z as We,A as $e,B as Ue,D as te,E as ne,F as $,G as U,H as Ge,I as Xe,J as qe,K as Ye,_ as re,L as Je,M as Qe,N as Ze,O as es,P as ss,Q as as}from"./main.js";import{C as ts,R as _,d as N,e as O,f as ns,g as rs,h as os,i as is,c as ls,S as ds}from"./index.esm-d52ea482.js";import{u as v,a as m,A as cs,T as us,M as ps,v as gs}from"./main-499a499e.js";import{B as u}from"./Box-0ce68545.js";import{s as H,u as oe,T as E,c as ie,a as xs,b as ms,G as le,I as hs}from"./iconBase-acf0401f.js";import{u as A,M as F}from"./index.esm-e776b934.js";import{a as de,b as ce,c as ue,d as fs}from"./index.esm-f4cad0c6.js";import{g as pe,a as ge,_ as P,b as xe,c as me,d as Z,e as js,f as he}from"./identifier-91e83c3b.js";import{a as I,T as W}from"./TreeItem-14a05677.js";import{C as bs,a as ys}from"./CardContent-c5e4b8be.js";import{F as G}from"./FormControl-e1c831f9.js";import{F as X}from"./Select-07b752e9.js";import{C as q}from"./Checkbox-d45bf253.js";import{C as Cs}from"./CardActions-748df63c.js";import{B as ee}from"./Button-53dec484.js";import{T as Ts}from"./TextField-c8735bb7.js";import{I as se}from"./InputAdornment-824db349.js";import{a as vs}from"./AdminTheme-95628d10.js";function Ls(s){return ge("MuiCardHeader",s)}const Is=pe("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ae=Is,Ss=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],ws=s=>{const{classes:a}=s;return ie({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Ls,a)},Es=H("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(s,a)=>P({[`& .${ae.title}`]:a.title,[`& .${ae.subheader}`]:a.subheader},a.root)})({display:"flex",alignItems:"center",padding:16}),Ps=H("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(s,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),_s=H("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(s,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),ks=H("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(s,a)=>a.content})({flex:"1 1 auto"}),Ms=p.forwardRef(function(a,l){const t=oe({props:a,name:"MuiCardHeader"}),{action:r,avatar:c,className:i,component:d="div",disableTypography:n=!1,subheader:x,subheaderTypographyProps:L,title:g,titleTypographyProps:j}=t,w=xe(t,Ss),h=P({},t,{component:d,disableTypography:n}),C=ws(h);let b=g;b!=null&&b.type!==E&&!n&&(b=e.jsx(E,P({variant:c?"body2":"h5",className:C.title,component:"span",display:"block"},j,{children:b})));let y=x;return y!=null&&y.type!==E&&!n&&(y=e.jsx(E,P({variant:c?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},L,{children:y}))),e.jsxs(Es,P({className:me(C.root,i),as:d,ref:l,ownerState:h},w,{children:[c&&e.jsx(Ps,{className:C.avatar,ownerState:h,children:c}),e.jsxs(ks,{className:C.content,ownerState:h,children:[b,y]}),r&&e.jsx(_s,{className:C.action,ownerState:h,children:r})]}))}),Rs=Ms;function As(s){return ge("MuiLink",s)}const Fs=pe("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),zs=Fs,fe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Bs=s=>fe[s]||s,Ks=({theme:s,ownerState:a})=>{const l=Bs(a.color),t=Z(s,`palette.${l}`,!1)||a.color,r=Z(s,`palette.${l}Channel`);return"vars"in s&&r?`rgba(${r} / 0.4)`:js(t,.4)},Ds=Ks,Vs=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Ns=s=>{const{classes:a,component:l,focusVisible:t,underline:r}=s,c={root:["root",`underline${he(r)}`,l==="button"&&"button",t&&"focusVisible"]};return ie(c,As,a)},Os=H(E,{name:"MuiLink",slot:"Root",overridesResolver:(s,a)=>{const{ownerState:l}=s;return[a.root,a[`underline${he(l.underline)}`],l.component==="button"&&a.button]}})(({theme:s,ownerState:a})=>P({},a.underline==="none"&&{textDecoration:"none"},a.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},a.underline==="always"&&P({textDecoration:"underline"},a.color!=="inherit"&&{textDecorationColor:Ds({theme:s,ownerState:a})},{"&:hover":{textDecorationColor:"inherit"}}),a.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${zs.focusVisible}`]:{outline:"auto"}})),Hs=p.forwardRef(function(a,l){const t=oe({props:a,name:"MuiLink"}),{className:r,color:c="primary",component:i="a",onBlur:d,onFocus:n,TypographyClasses:x,underline:L="always",variant:g="inherit",sx:j}=t,w=xe(t,Vs),{isFocusVisibleRef:h,onBlur:C,onFocus:b,ref:y}=xs(),[T,Y]=p.useState(!1),be=ms(l,y),ye=K=>{C(K),h.current===!1&&Y(!1),d&&d(K)},Ce=K=>{b(K),h.current===!0&&Y(!0),n&&n(K)},J=P({},t,{color:c,component:i,focusVisible:T,underline:L,variant:g}),Te=Ns(J);return e.jsx(Os,P({color:c,className:me(Te.root,r),classes:x,component:i,onBlur:ye,onFocus:Ce,ref:be,ownerState:J,variant:g,sx:[...Object.keys(fe).includes(c)?[]:[{color:c}],...Array.isArray(j)?j:[j]]},w))}),R=Hs,k=()=>e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"10px"},children:[e.jsx(ts,{sx:{width:"1em !important",height:"1em !important"}}),e.jsx(E,{children:"Loading..."})]}),z={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTablePaperProps:{sx:{boxShadow:"none",marginRight:"30px",marginBottom:"40px"}}},B=({msg:s})=>e.jsx(u,{sx:{padding:"1rem 0",marginBottom:"20px"},children:e.jsx(E,{children:s})}),Ws=({dbs:s,tbl:a})=>{o.debug(s,a);const l=v(),t=m(n=>ve(n,s,a));o.debug(t);const r=m(n=>Le(n,s,a));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreeCls,{dbs:s,tbl:a},function(n){const x=n==null?void 0:n.data;o.debug("response data",x),l(Ie({dbs:s,tbl:a,cls:x}))})},i=p.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),d=A({...z,columns:i,data:r,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"}});return o.debug(d),t?t&&r.length===0?e.jsx(B,{msg:"Table has no columns"}):(o.debug(r),e.jsx(F,{table:d})):e.jsx(k,{})},$s=({dbs:s,tbl:a})=>{o.debug(s,a);const l=v(),t=m(n=>Se(n,s,a));o.debug(t);const r=m(n=>we(n,s,a));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreeIdx,{dbs:s,tbl:a},function(n){const x=n==null?void 0:n.data;o.debug("response data",x),l(Ee({dbs:s,tbl:a,idx:x}))})},i=p.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),d=A({...z,columns:i,data:r,initialState:{density:"comfortable"}});return o.debug(d),t?t&&r.length===0?e.jsx(B,{msg:"Table has no indexes"}):e.jsx(F,{table:d}):e.jsx(k,{})};var M=(s=>(s[s.MANAGE=0]="MANAGE",s[s.EXPLORE=1]="EXPLORE",s))(M||{});const Us=({dbs:s,tbl:a})=>{o.debug(s,a);const l=v(),t=m(n=>Pe(n,s,a));o.debug(t);const r=m(n=>_e(n,s,a));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreeTrg,{dbs:s,tbl:a},function(n){const x=n==null?void 0:n.data;o.debug("response data",x),l(ke({dbs:s,tbl:a,trg:x}))})},i=p.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:n})=>e.jsx("pre",{style:{padding:0,margin:0},children:n.getValue()})}],[]),d=A({...z,columns:i,data:r,initialState:{density:"comfortable"}});return o.debug(d),t?t&&r.length===0?e.jsx(B,{msg:"Table has no triggers"}):e.jsx(F,{table:d}):e.jsx(k,{})},Gs=({dbs:s,tbl:a})=>{o.debug(s,a);const l=v(),t=m(n=>Me(n,s,a));o.debug(t);const r=m(n=>Re(n,s,a));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreeFrk,{dbs:s,tbl:a},function(n){const x=n==null?void 0:n.data;o.debug("response data",x),l(Ae({dbs:s,tbl:a,frk:x}))})},i=p.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),d=A({...z,columns:i,data:r,initialState:{density:"comfortable"}});return o.debug(d),t?t&&r.length===0?e.jsx(B,{msg:"Table contains no foreign keys"}):e.jsx(F,{table:d}):e.jsx(k,{})};var V=(s=>(s[s.TABLE=0]="TABLE",s[s.VIEW=1]="VIEW",s))(V||{});function Xs(s){return le({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M9.183 6.117a6 6 0 1 0 4.511 3.986"}},{tag:"path",attr:{d:"M14.813 17.883a6 6 0 1 0 -4.496 -3.954"}}]})(s)}function qs(s){return le({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2"}}]})(s)}const je=({dbs:s,tbl:a,typ:l})=>{o.debug(s,a,l);const t=v();return e.jsx(I,{nodeId:a,label:e.jsx(u,{color:"primary",sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[l===V.VIEW?e.jsx(de,{}):e.jsx(ce,{}),e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[e.jsx(u,{children:a}),e.jsxs(u,{sx:{display:"none",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center"},className:"pp-row-actions",children:[e.jsx(u,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(R,{underline:"none",onClick:r=>{t(Q({dbs:s,tbl:a,typ:l,doaction:M.MANAGE})),r.preventDefault(),r.stopPropagation()},children:"Manage"}),e.jsx(u,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(R,{underline:"none",onClick:r=>{t(Q({dbs:s,tbl:a,typ:l,doaction:M.EXPLORE})),r.preventDefault(),r.stopPropagation()},children:"Explore"})]})]})]})}),children:e.jsxs(W,{"aria-label":"Columns and indexes",defaultCollapseIcon:e.jsx(N,{}),defaultExpandIcon:e.jsx(O,{}),sx:{display:"grid",gap:"0"},children:[e.jsx(I,{nodeId:"columns",label:e.jsxs(u,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ns,{}),e.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ws,{dbs:s,tbl:a})}),l===V.TABLE&&e.jsxs(e.Fragment,{children:[e.jsx(I,{nodeId:"indexes",label:e.jsxs(u,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(rs,{}),e.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:e.jsx($s,{dbs:s,tbl:a})}),e.jsx(I,{nodeId:"foreignkeys",label:e.jsxs(u,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(Xs,{}),e.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Gs,{dbs:s,tbl:a})}),e.jsx(I,{nodeId:"triggers",label:e.jsxs(u,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ue,{}),e.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Us,{dbs:s,tbl:a})})]})]})})},Ys=({dbs:s,search:a})=>{const l=v();o.debug(s,a);const t=m(i=>Fe(i,s));o.debug(t);const r=m(i=>ze(i,s));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreeTbl,{dbs:s},function(i){const d=i==null?void 0:i.data;o.debug("response data",d),l(Be({dbs:s,tbl:d}))})};return t?t&&r.length===0?e.jsx(u,{sx:{padding:"1rem"},children:e.jsx(E,{children:"Database contains no tables"})}):e.jsxs(W,{"aria-label":"Tables",defaultCollapseIcon:e.jsx(N,{}),defaultExpandIcon:e.jsx(O,{}),sx:{display:"grid",gap:"0"},children:[...r.map(i=>a!==""&&!i.toLowerCase().includes(a.toLowerCase())?null:e.jsx(je,{dbs:s,tbl:i,typ:V.TABLE}))]}):e.jsx(k,{})},Js=({dbs:s,search:a})=>{const l=v();o.debug(s,a);const t=m(i=>Ke(i,s));o.debug(t),p.useEffect(()=>{t||c()},[t]);const r=m(i=>De(i,s));o.debug(r);const c=()=>{_(S.appUrlTreeVws,{dbs:s},function(i){const d=i==null?void 0:i.data;o.debug("response data",d),l(Ve({dbs:s,vws:d}))})};return t?t&&r.length===0?e.jsx(u,{sx:{padding:"1rem"},children:e.jsx(E,{children:"Database contains no views"})}):e.jsxs(W,{"aria-label":"Views",defaultCollapseIcon:e.jsx(N,{}),defaultExpandIcon:e.jsx(O,{}),sx:{display:"grid",gap:"0"},children:[...r.map(i=>a!==""&&!i.toLowerCase().includes(a.toLowerCase())?null:e.jsx(je,{dbs:s,tbl:i,typ:V.VIEW}))]}):e.jsx(k,{})},Qs=({dbs:s,search:a})=>{o.debug(s,a);const l=v(),t=m(n=>Ne(n,s));o.debug(t);const r=m(n=>Oe(n,s));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreePrc,{dbs:s},function(n){const x=n==null?void 0:n.data;o.debug("response data",x),l(He({dbs:s,prc:x}))})},i=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:n})=>e.jsx("pre",{style:{padding:0,margin:0},children:n.getValue()})}],[]),d=A({...z,columns:i,data:r.filter(n=>a===""||n.routine_name.toLowerCase().includes(a.toLowerCase())),initialState:{density:"comfortable"}});return o.debug(d),t?t&&r.length===0?e.jsx(B,{msg:"Database contains no stored procedures"}):e.jsx(F,{table:d}):e.jsx(k,{})},Zs=({dbs:s,search:a})=>{o.debug(s,a);const l=v(),t=m(n=>We(n,s));o.debug(t);const r=m(n=>$e(n,s));o.debug(r),p.useEffect(()=>{t||c()},[t]);const c=()=>{_(S.appUrlTreeFnc,{dbs:s},function(n){const x=n==null?void 0:n.data;o.debug("response data",x),l(Ue({dbs:s,fnc:x}))})},i=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:n})=>e.jsx("pre",{style:{padding:0,margin:0},children:n.getValue()})}],[]),d=A({...z,columns:i,data:r.filter(n=>a===""||n.routine_name.toLowerCase().includes(a.toLowerCase())),initialState:{density:"comfortable"}});return o.debug(d),t?t&&r.length===0?e.jsx(B,{msg:"Database contains no functions"}):e.jsx(F,{table:d}):e.jsx(k,{})};var f=(s=>(s.WP="wp",s.LOCAL="local",s.REMOTE="remote",s.SYSTEM="system",s))(f||{});const ea=({setShowFilter:s})=>{const a=v(),l=m(c=>te(c));o.debug(l);const t=m(c=>ne(c));o.debug(t);const r=()=>{localStorage.setItem("ppDbsTypes",JSON.stringify(l))};return e.jsxs(bs,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[e.jsx(Rs,{title:"Database filter",sx:{textAlign:"center"}}),e.jsx(ys,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:e.jsxs(u,{sx:{display:"inline-grid",textAlign:"left"},children:[e.jsx(G,{children:e.jsxs(X,{children:[e.jsx(q,{checked:l.includes(f.WP),onChange:(c,i)=>{a(i?$({dbsType:f.WP}):U({dbsType:f.WP}))}}),"WordPress database"]})}),e.jsx(G,{children:e.jsxs(X,{children:[e.jsx(q,{checked:l.includes(f.LOCAL),onChange:(c,i)=>{a(i?$({dbsType:f.LOCAL}):U({dbsType:f.LOCAL}))}}),"Local databases"]})}),e.jsx(G,{children:e.jsxs(X,{children:[e.jsx(q,{checked:l.includes(f.REMOTE),onChange:(c,i)=>{a(i?$({dbsType:f.REMOTE}):U({dbsType:f.REMOTE}))}}),"Remote databases"]})}),e.jsx(G,{children:e.jsxs(X,{children:[e.jsx(q,{checked:l.includes(f.SYSTEM),onChange:(c,i)=>{a(i?$({dbsType:f.SYSTEM}):U({dbsType:f.SYSTEM}))}}),"System databases"]})})]})}),e.jsxs(Cs,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(ee,{variant:"contained",onClick:()=>r(),children:"Remember"}),e.jsx(ee,{variant:"contained",onClick:()=>s(!1),children:"OK"})]})]})},D=({search:s,setSearch:a,addFilter:l})=>{o.debug(s,l);const[t,r]=p.useState(!1);return e.jsxs(u,{sx:{position:"relative",marginRight:l?0:"20px"},children:[e.jsx(Ts,{value:s,onChange:c=>{a(c.target.value)},onClick:c=>{c.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(se,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(os,{})}),endAdornment:e.jsx(e.Fragment,{children:l&&e.jsx(se,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(hs,{onClick:()=>{r(!t)},children:e.jsx(is,{})})})})}}),t&&e.jsx(ea,{setShowFilter:r})]})},sa=p.memo(({dbs:s})=>{o.debug(s);const a=v(),[l,t]=p.useState(!1),[r,c]=p.useState("");o.debug(l,r);const[i,d]=p.useState(!1),[n,x]=p.useState("");o.debug(i,n);const[L,g]=p.useState(!1),[j,w]=p.useState("");o.debug(L,j);const[h,C]=p.useState(!1),[b,y]=p.useState("");return o.debug(h,b),e.jsxs(W,{"aria-label":"Databases",defaultCollapseIcon:e.jsx(N,{}),defaultExpandIcon:e.jsx(O,{}),sx:{display:"grid",gap:"0"},children:[e.jsx(I,{nodeId:"tables",onClick:()=>{t(!l)},label:e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ce,{}),"Tables"]}),e.jsxs(u,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(u,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(R,{underline:"none",onClick:T=>{a(Ge({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(u,{children:l&&e.jsx(D,{search:r,setSearch:c})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ys,{dbs:s,search:r})}),e.jsx(I,{nodeId:"view",onClick:()=>{d(!i)},label:e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(de,{}),"Views"]}),e.jsxs(u,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(u,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(R,{underline:"none",onClick:T=>{a(Xe({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(u,{children:i&&e.jsx(D,{search:n,setSearch:x})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Js,{dbs:s,search:n})}),e.jsx(I,{nodeId:"procedures",onClick:()=>{g(!L)},label:e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ue,{}),"Stored Procedures"]}),e.jsxs(u,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(u,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(R,{underline:"none",onClick:T=>{a(qe({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(u,{children:L&&e.jsx(D,{search:j,setSearch:w})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Qs,{dbs:s,search:j})}),e.jsx(I,{nodeId:"functions",onClick:()=>{C(!h)},label:e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(qs,{}),"Functions"]}),e.jsxs(u,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(u,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(R,{underline:"none",onClick:T=>{a(Ye({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(u,{children:h&&e.jsx(D,{search:b,setSearch:y})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Zs,{dbs:s,search:b})})]})}),aa=p.lazy(()=>re(()=>import("./Alert-7547bc75.js"),["./Alert-7547bc75.js","./main.js","./index.esm-f4cad0c6.js","./iconBase-acf0401f.js","./identifier-91e83c3b.js","./AdminTheme-95628d10.js","./AlertTitle-0277b656.js","./createSvgIcon-92c7fe83.js","./Close-07cb3d3a.js","./Paper-1943bcb2.js"],import.meta.url)),ta=p.lazy(()=>re(()=>import("./Settings-d9db4274.js"),["./Settings-d9db4274.js","./main.js","./settings-d6f535d3.js","./identifier-91e83c3b.js","./main-499a499e.js","./index.esm-d52ea482.js","./iconBase-acf0401f.js","./Box-0ce68545.js","./Paper-1943bcb2.js","./main-9fe7f77b.css","./Collapse-746eff24.js","./Select-07b752e9.js","./useFormControl-74340145.js","./utils-a4c617b5.js","./Input-29494a31.js","./createSvgIcon-92c7fe83.js","./settings-6587c751.css","./AdminTheme-95628d10.js","./Actions-eda228ad.js","./ConfirmDialog-a562852d.js","./DialogContent-93dc71be.js","./Switch-321ceb1c.js","./Close-07cb3d3a.js","./FormControlLabel-8e3c3f60.js","./Button-53dec484.js","./FormHelperText-ab957a1c.js","./RadioGroup-330d4c57.js","./Radio-f4e05e00.js","./TextField-c8735bb7.js","./FormControl-e1c831f9.js","./MenuItem-15f494c0.js","./CardContent-c5e4b8be.js","./index.esm-e776b934.js","./useMobilePicker-9401f362.js","./InputAdornment-824db349.js","./AlertTitle-0277b656.js","./Checkbox-d45bf253.js","./DateTimePicker-9aae1031.js","./date-time-utils-c7fd1af0.js","./dateViewRenderers-7976fbb1.js","./TimePicker-1f56383f.js","./DatePicker-377e1bc5.js","./index.esm-f4cad0c6.js","./TreeItem-14a05677.js","./CardActions-748df63c.js"],import.meta.url)),na=()=>{var L;const s=v(),[a,l]=p.useState(""),t=m(g=>Je(g));o.debug(t);const r=m(g=>Qe(g));o.debug(r);const c=m(g=>Ze(g));o.debug(c);const i=m(g=>te(g));o.debug(i);const d=m(g=>ne(g));o.debug(d),p.useEffect(()=>{n()},[]);const n=()=>{let g=[];const j=localStorage.getItem("ppDbsTypes");j!==null?g=JSON.parse(j):g=[f.WP,f.LOCAL,f.REMOTE],_(S.appUrlTreeDbs,{},function(w){const h=w==null?void 0:w.data;o.debug("response data",h);const C=[];h.map(y=>{C.push(y.dbs)}),s(ss({dbs:C,dbsTypes:g}));const b={};h.map(y=>{b[y.dbs]=y.dbs_type}),s(as({dbs:b}))})};if(t===void 0)return null;const x=vs();return e.jsxs(ls,{theme:x,children:[e.jsx(u,{sx:{marginBottom:"30px",display:(d==null?void 0:d.action)===M.EXPLORE?"none":"block"},children:e.jsx(cs,{position:"relative",children:e.jsxs(us,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"12px !important"},children:[e.jsx(u,{children:((L=S.appOrig)==null?void 0:L.appTarget)==="backend"?"Search & Filter":"Data Explorer"}),e.jsx(u,{children:e.jsx(D,{search:a,setSearch:l,addFilter:!0})})]})})}),r!==""&&e.jsx(u,{sx:{marginBottom:"30px"},children:e.jsx(p.Suspense,{children:e.jsx(aa,{severity:"error",message:r,close:!0,setClose:()=>{s(es({error:""}))}})})}),e.jsx(W,{"aria-label":"Data Explorer",defaultCollapseIcon:e.jsx(N,{}),defaultExpandIcon:e.jsx(O,{}),sx:{display:(d==null?void 0:d.action)===M.EXPLORE?"none":"grid",gridGap:"0",borderBottom:"1px solid rgba(0, 0, 0, 0.34)"},children:Object.keys(t).map(g=>{if(i.includes(c[g])===!1||a!==""&&!g.toLowerCase().includes(a.toLowerCase()))return null;const j=c[g].toLocaleLowerCase()==="wp"?"WordPress database ("+g+")":g;return e.jsx(I,{nodeId:g,label:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[e.jsx(fs,{}),j]}),sx:{padding:"0"},children:e.jsx(sa,{dbs:g})},g)})}),d!==void 0&&d.action===M.EXPLORE&&e.jsx("div",{className:"pp-container",children:e.jsx(ps,{appId:gs(),dbs:d.dbs,tbl:d.tbl,exploring:!0})}),d!==void 0&&d.action===M.MANAGE&&e.jsx(p.Suspense,{fallback:e.jsx(ds,{title:"Loading table settings..."}),children:e.jsx(ta,{dbs:d.dbs,tbl:d.tbl,typ:d.typ})})]})},va=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"}));export{va as E,V as T};
