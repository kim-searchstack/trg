import{r as C,av as W,aw as gt,l as Y,j as h,a6 as yt,aC as bt}from"./main.js";import{T as ht,V as Tt}from"./index.esm-d52ea482.js";import{P as Z}from"./DialogContent-93dc71be.js";import{e as wt,f as St}from"./index.esm-f4cad0c6.js";import{v as Et,c as Ot,a as Pe,i as jt,R as xt}from"./main-499a499e.js";import{k as _t}from"./Actions-eda228ad.js";import{C as Rt}from"./ConfirmDialog-a562852d.js";import{B as ve}from"./Box-0ce68545.js";import{B as ge}from"./Button-53dec484.js";import{P as Ct}from"./Select-07b752e9.js";import{T as At,I as Lt}from"./iconBase-acf0401f.js";import{R as kt}from"./RadioGroup-330d4c57.js";import{F as ee}from"./FormControlLabel-8e3c3f60.js";import{R as te}from"./Radio-f4e05e00.js";import"./identifier-91e83c3b.js";import"./createSvgIcon-92c7fe83.js";import"./Paper-1943bcb2.js";import"./Switch-321ceb1c.js";import"./Input-29494a31.js";import"./useFormControl-74340145.js";import"./utils-a4c617b5.js";import"./Close-07cb3d3a.js";function ne(e){if(typeof window>"u")return e;const t=C.useRef(null);return C.useLayoutEffect(()=>{t.current=e}),C.useCallback((...a)=>{var u;(u=t.current)===null||u===void 0||u.call(t,...a)},[])}const Ne={};function Bt(e,t){Ne[e]||(Ne[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}const Pt={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1};function Nt({parentPopupState:e,popupId:t,variant:a,disableAutoFocus:u}){const l=C.useRef(!0);C.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const[v,y]=C.useState(Pt),s=C.useCallback(f=>{l.current&&y(f)},[]),j=C.useCallback(f=>s(i=>({...i,setAnchorElUsed:!0,anchorEl:f??void 0})),[]),c=ne(f=>(v.isOpen?m(f):d(f),v)),d=ne(f=>{const i=f instanceof Element?void 0:f,E=f instanceof Element?f:(f==null?void 0:f.currentTarget)instanceof Element?f.currentTarget:void 0;if((i==null?void 0:i.type)==="touchstart"){s(g=>({...g,_deferNextOpen:!0}));return}const I=i==null?void 0:i.clientX,q=i==null?void 0:i.clientY,J=typeof I=="number"&&typeof q=="number"?{left:I,top:q}:void 0,D=g=>{if(!f&&!g.setAnchorElUsed&&a!=="dialog"&&Bt("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return g;setTimeout(()=>e._setChildPopupState(P))}const p={...g,isOpen:!0,anchorPosition:J,hovered:(i==null?void 0:i.type)==="mouseover"||g.hovered,focused:(i==null?void 0:i.type)==="focus"||g.focused,_openEventType:i==null?void 0:i.type};return i!=null&&i.currentTarget?g.setAnchorElUsed||(p.anchorEl=i==null?void 0:i.currentTarget):E&&(p.anchorEl=E),p};s(g=>g._deferNextOpen?(setTimeout(()=>s(D),0),{...g,_deferNextOpen:!1}):D(g))}),T=f=>{const{_childPopupState:i}=f;return setTimeout(()=>{i==null||i.close(),e==null||e._setChildPopupState(null)}),{...f,isOpen:!1,hovered:!1,focused:!1}},m=ne(f=>{const i=f instanceof Element?void 0:f;if((i==null?void 0:i.type)==="touchstart"){s(E=>({...E,_deferNextClose:!0}));return}s(E=>E._deferNextClose?(setTimeout(()=>s(T),0),{...E,_deferNextClose:!1}):T(E))}),w=C.useCallback((f,i)=>{f?d(i):m(i)},[]),U=ne(f=>{const{relatedTarget:i}=f;s(E=>E.hovered&&!(i instanceof Element&&ye(i,P))?E.focused?{...E,hovered:!1}:T(E):E)}),_=ne(f=>{if(!f)return;const{relatedTarget:i}=f;s(E=>E.focused&&!(i instanceof Element&&ye(i,P))?E.hovered?{...E,focused:!1}:T(E):E)}),S=C.useCallback(f=>s(i=>({...i,_childPopupState:f})),[]),P={...v,setAnchorEl:j,popupId:t,variant:a,open:d,close:m,toggle:c,setOpen:w,onBlur:_,onMouseLeave:U,disableAutoFocus:u??!!(v.hovered||v.focused),_setChildPopupState:S};return P}function Ft({isOpen:e,popupId:t,variant:a}){return{...a==="popover"?{"aria-haspopup":!0,"aria-controls":e&&t!=null?t:void 0}:a==="popper"?{"aria-describedby":e&&t!=null?t:void 0}:void 0}}function Mt(e){return{...Ft(e),onClick:e.open,onTouchStart:e.open}}function It({isOpen:e,anchorEl:t,anchorPosition:a,close:u,popupId:l,onMouseLeave:v,disableAutoFocus:y,_openEventType:s}){return{id:l,anchorEl:t,anchorPosition:a,anchorReference:s==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:u,onMouseLeave:v,...y&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Ut(e,{popupId:t}){if(!t)return null;const a=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof a.getElementById=="function"?a.getElementById(t):null}function ye(e,t){const{anchorEl:a,_childPopupState:u}=t;return Fe(a,e)||Fe(Ut(e,t),e)||u!=null&&ye(e,u)}function Fe(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}function He({children:e,popupId:t,variant:a,parentPopupState:u,disableAutoFocus:l}){const v=Nt({popupId:t,variant:a,parentPopupState:u,disableAutoFocus:l}),y=e(v);return y??null}He.propTypes={children:Z.func.isRequired,popupId:Z.string,variant:Z.oneOf(["popover","popper"]).isRequired,parentPopupState:Z.object,disableAutoFocus:Z.bool};var Ht={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},qt=`\r
`,Xt="\uFEFF",be=e=>Object.assign({},Ht,e);class Jt extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class Dt extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class $t extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}var oe=e=>e,F=e=>e,ue=oe,re=oe,Me=oe,Ie=oe,Kt=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},Gt=e=>Me(typeof e=="object"?e.key:e),Wt=e=>Ie(typeof e=="object"?e.displayLabel:e),Yt=(e,...t)=>t.reduce((a,u)=>u(a),e),Vt=e=>t=>e.useBom?ue(F(t)+Xt):t,zt=e=>t=>e.showTitle?ue(F(t)+e.title):t,qe=e=>t=>ue(F(e)+F(t)+qt),Xe=e=>(t,a)=>Qt(e)(re(t+a)),Qt=e=>t=>oe(F(t)+e.fieldSeparator),Zt=(e,t)=>a=>{if(!e.showColumnHeaders)return a;if(t.length<1)throw new Dt("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let u=re("");for(let l=0;l<t.length;l++){const v=Wt(t[l]);u=Xe(e)(u,Je(e,v))}return u=re(F(u).slice(0,-1)),qe(a)(u)},en=(e,t,a)=>u=>{let l=u;for(var v=0;v<a.length;v++){let y=re("");for(let s=0;s<t.length;s++){const j=Gt(t[s]),c=typeof a[v][F(j)]>"u"?e.replaceUndefinedWith:a[v][F(j)];y=Xe(e)(y,Je(e,c))}y=re(F(y).slice(0,-1)),l=qe(l)(y)}return l},Ue=e=>+e===e&&(!isFinite(e)||!!(e%1)),Je=(e,t)=>{if(e.decimalSeparator==="locale"&&Ue(t))return t.toLocaleString();if(e.decimalSeparator!=="."&&Ue(t))return t.toString().replace(".",e.decimalSeparator);if(typeof t=="string"){let a=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(a=e.quoteCharacter+Kt(t,e.quoteCharacter)+e.quoteCharacter),a}if(typeof t=="boolean"&&e.boolDisplay){const a=t?"true":"false";return e.boolDisplay[a]}return t},tn=e=>t=>{const a=be(e),u=a.useKeysAsHeaders?Object.keys(t[0]):a.columnHeaders;let l=Yt(ue(""),Vt(a),zt(a),Zt(a,u),en(a,u,t));if(F(l).length<1)throw new Jt("Output is empty. Is your data formatted correctly?");return l},nn=e=>t=>{if(!window)throw new $t("Downloading only supported in a browser environment.");const a=be(e),u=F(t),l=a.useTextFile?"plain":"csv",v=a.useTextFile?"txt":"csv";let y=new Blob([u],{type:`text/${l};charset=utf8;`}),s=document.createElement("a");s.download=`${a.filename}.${v}`,s.href=URL.createObjectURL(y),s.setAttribute("visibility","hidden"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},De={};(function(e){(function(t,a){a(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:W,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.toXML=void 0;function a(o){return v(o)||l(o)||T(o)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function v(o){if(Array.isArray(o))return m(o)}function y(o,n){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(o);n&&(b=b.filter(function(x){return Object.getOwnPropertyDescriptor(o,x).enumerable})),r.push.apply(r,b)}return r}function s(o){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?y(Object(r),!0).forEach(function(b){j(o,b,r[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(b){Object.defineProperty(o,b,Object.getOwnPropertyDescriptor(r,b))})}return o}function j(o,n,r){return n in o?Object.defineProperty(o,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[n]=r,o}function c(o,n){return U(o)||w(o,n)||T(o,n)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(o,n){if(o){if(typeof o=="string")return m(o,n);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(o,n)}}function m(o,n){(n==null||n>o.length)&&(n=o.length);for(var r=0,b=new Array(n);r<n;r++)b[r]=o[r];return b}function w(o,n){var r=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(r!=null){var b=[],x=!0,R=!1,A,L;try{for(r=r.call(o);!(x=(A=r.next()).done)&&(b.push(A.value),!(n&&b.length===n));x=!0);}catch(M){R=!0,L=M}finally{try{!x&&r.return!=null&&r.return()}finally{if(R)throw L}}return b}}function U(o){if(Array.isArray(o))return o}function _(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_=function(r){return typeof r}:_=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_(o)}var S={ARRAY:"array",BOOLEAN:"boolean",DATE:"date",FUNCTION:"function",JSTOXML_OBJECT:"jstoxml-object",NULL:"null",NUMBER:"number",OBJECT:"object",STRING:"string"},P=[S.STRING,S.NUMBER,S.BOOLEAN],f='<?xml version="1.0" encoding="UTF-8"?>',i=["_selfCloseTag","_attrs"],E=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.repeat(r)},I=function(n){return Array.isArray(n)&&S.ARRAY||_(n)===S.OBJECT&&n!==null&&n._name&&S.JSTOXML_OBJECT||n instanceof Date&&S.DATE||n===null&&S.NULL||_(n)},q=function(n){return n.startsWith("<![CDATA[")},J=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=arguments.length>2?arguments[2]:void 0,x=n;if(_(n)===S.STRING){if(q(n))return n;var R=new RegExp("(".concat(Object.keys(r).join("|"),")(?!(\\w|#)*;)"),"g");x=String(n).replace(R,function(A,L){return r[L]||""})}return typeof b=="function"?b(x):x},D=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0,x=arguments.length>3?arguments[3]:void 0,R=Array.isArray(n)?n:Object.entries(n).map(function(A){var L=c(A,2),M=L[0],X=L[1];return j({},M,X)});return R.reduce(function(A,L){var M=Object.keys(L)[0],X=L[M];if(_(b)===S.FUNCTION){var ie=b(M,X);if(ie)return A}var $=r?J(X,r):X,le=!x&&$===!0?"":'="'.concat($,'"');return A.push("".concat(M).concat(le)),A},[])},g=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0,x=arguments.length>3?arguments[3]:void 0,R=D(n,r,b,x);if(R.length===0)return"";var A=R.join(" ");return" ".concat(A)},p=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).map(function(r){return{_name:r,_content:n[r]}})},O=function(n){return P.includes(I(n))},B=function(n){return!n.match("<")},N=function(n){var r=n.header,b=n.isOutputStart,x=r&&b;if(!x)return"";var R=_(r)===S.BOOLEAN;return R?f:r},ae={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},he=function o(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=r.depth,x=b===void 0?0:b,R=r.indent,A=r._isFirstItem,L=r._isOutputStart,M=L===void 0?!0:L,X=r.header,ie=r.attributeReplacements,$=ie===void 0?{}:ie,le=r.attributeFilter,Te=r.attributeExplicitTrue,Ge=Te===void 0?!1:Te,we=r.contentReplacements,ce=we===void 0?{}:we,Se=r.contentMap,Ee=r.selfCloseTags,We=Ee===void 0?!0:Ee,Ye=typeof $=="boolean"&&!$,Ve=Ye?{}:s(s({},ae),$),ze=typeof ce=="boolean"&&!ce,Qe=ze?{}:s(s({},ae),ce),Oe=typeof R=="string",fe=E(R,x),Ze=I(n),je=N({header:X,indent:R,depth:x,isOutputStart:M}),se=M&&!je&&A&&x===0,xe=Oe&&!se?`
`:"",H="";switch(Ze){case S.JSTOXML_OBJECT:{var K=n._name,G=n._content;if(G===null&&typeof Se!="function"){H="".concat(xe).concat(fe).concat(K);break}var et=Array.isArray(G)&&G.every(O);if(et){var tt=G.map(function(k){return o({_name:K,_content:k},s(s({},r),{},{depth:x,_isOutputStart:!1}))});return tt.join("")}if(i.includes(K))break;var V=o(G,s(s({},r),{},{depth:x+1,_isOutputStart:se})),nt=I(V),rt=B(V),ot=q(V),_e="".concat(xe).concat(fe);if(K==="_comment"){H+="".concat(_e,"<!-- ").concat(G," -->");break}var Re=nt==="undefined"||V==="",at=We,Ce=n._selfCloseTag,Ae=_(Ce)===S.BOOLEAN?Re&&Ce:Re&&at,it=Ae?"/":"",st=g(n._attrs,Ve,le,Ge),ut="<".concat(K).concat(st).concat(it,">"),lt=Oe&&!rt&&!ot?`
`.concat(fe):"",ct=Ae?"":"".concat(V).concat(lt,"</").concat(K,">");H+="".concat(_e).concat(ut).concat(ct);break}case S.OBJECT:{var Le=Object.keys(n),ft=Le.map(function(k,z){var de=s(s({},r),{},{_isFirstItem:z===0,_isLastItem:z+1===Le.length,_isOutputStart:se}),Q={_name:k};if(I(n[k])===S.OBJECT){i.forEach(function(pe){var Be=n[k][pe];typeof Be<"u"&&(Q[pe]=Be,delete n[k][pe])});var mt=typeof n[k]._content<"u";if(mt&&Object.keys(n[k]).length>1){var ke=Object.assign({},n[k]);delete ke._content,Q._content=[].concat(a(p(ke)),[n[k]._content])}}typeof Q._content>"u"&&(Q._content=n[k]);var vt=o(Q,de);return vt},r);H=ft.join("");break}case S.FUNCTION:{var dt=n(r);H=o(dt,r);break}case S.ARRAY:{var pt=n.map(function(k,z){var de=s(s({},r),{},{_isFirstItem:z===0,_isLastItem:z+1===n.length,_isOutputStart:se});return o(k,de)});H=pt.join("");break}default:{H=J(n,Qe,Se);break}}return"".concat(je).concat(H)};t.toXML=he;var Ke={toXML:he};t.default=Ke})})(De);var $e={exports:{}};(function(e,t){(function(a,u){u()})(W,function(){function a(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function u(c,d,T){var m=new XMLHttpRequest;m.open("GET",c),m.responseType="blob",m.onload=function(){j(m.response,d,T)},m.onerror=function(){console.error("could not download file")},m.send()}function l(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function v(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var y=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof W=="object"&&W.global===W?W:void 0,s=y.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),j=y.saveAs||(typeof window!="object"||window!==y?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,d,T){var m=y.URL||y.webkitURL,w=document.createElement("a");d=d||c.name||"download",w.download=d,w.rel="noopener",typeof c=="string"?(w.href=c,w.origin===location.origin?v(w):l(w.href)?u(c,d,T):v(w,w.target="_blank")):(w.href=m.createObjectURL(c),setTimeout(function(){m.revokeObjectURL(w.href)},4e4),setTimeout(function(){v(w)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,T){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(a(c,T),d);else if(l(c))u(c,d,T);else{var m=document.createElement("a");m.href=c,m.target="_blank",setTimeout(function(){v(m)})}}:function(c,d,T,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof c=="string")return u(c,d,T);var w=c.type==="application/octet-stream",U=/constructor/i.test(y.HTMLElement)||y.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||w&&U||s)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var i=S.result;i=_?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=i:location=i,m=null},S.readAsDataURL(c)}else{var P=y.URL||y.webkitURL,f=P.createObjectURL(c);m?m.location=f:location.href=f,m=null,setTimeout(function(){P.revokeObjectURL(f)},4e4)}});y.saveAs=j.saveAs=j,e.exports=j})})($e);var rn=$e.exports;const me=gt(rn),on=({table:e,appId:t,dbs:a,tbl:u,metaData:l,bulkActions:v,refetch:y})=>{Y.debug(t,a,u,l);let s="csv";const[j,c]=C.useState(s),[d,T]=C.useState(!1),m=C.useMemo(()=>Et(),[]),w=e.getSelectedRowModel().rows;e.getAllColumns();const U=be({filename:t,fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),_=g=>{const p={};if(l.primary_key&&Array.isArray(l.primary_key))for(let O=0;O<l.primary_key.length;O++){const B=l.primary_key[O];p[B]=g[B]}return p},S=g=>{var p,O,B;for(let N=0;N<((p=l==null?void 0:l.columns)==null?void 0:p.length);N++)if(((O=l==null?void 0:l.columns[N])==null?void 0:O.column_name)===g)return(B=l==null?void 0:l.columns[N])==null?void 0:B.data_type;return"varchar"};C.useRef();const P=async()=>{},f=()=>{const g=w.map(O=>O.original),p=tn(U)(g);nn(U)(p)},i=()=>{const g=w.map(p=>p.original);me(new Blob([JSON.stringify(g)],{type:"text/json;charset=utf-8"}),t+".json")};C.useRef();const E=()=>{const g=w.map(O=>({row:O.original})),p=De.toXML({table:g});me(new Blob([p],{type:"text/plain;charset=utf-8"}),t+".xml")},I=()=>{const g=w.map(O=>O.original);let p="insert into "+u+" (";for(const O in g[0])p+=O+",";p=p.slice(0,-1)+") values ";for(let O=0;O<g.length;O++){const B=g[O];p+="(";for(const N in B){const ae=Ot(S(N));B[N]===null?p+="null,":ae==="number"?p+=B[N]+",":p+="'"+B[N]+"',"}p=p.slice(0,-1),p+="),"}p=p.slice(0,-1)+";",me(new Blob([p],{type:"text/plain;charset=utf-8"}),t+".sql")},q=()=>{const g=w.map(p=>p.original);for(let p=0;p<g.length;p++){const O=_(g[p]);_t(a,u,O,function(){y()})}},J=()=>null,D=()=>null;return h.jsxs(h.Fragment,{children:[h.jsx(He,{variant:"popover",popupId:m,children:g=>h.jsxs(ve,{children:[h.jsx(ge,{variant:"contained",endIcon:h.jsx(wt,{}),...Mt(g),children:"Bulk Actions"}),h.jsx(Ct,{...It(g),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:h.jsxs(ve,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[w.length===0&&h.jsx(At,{sx:{textAlign:"center",marginTop:"10px"},children:"No rows selected"}),h.jsxs(kt,{value:j,onChange:(p,O)=>{c(O),p.stopPropagation()},children:[J(),v.csv&&h.jsx(ee,{value:"csv",label:"Export to CSV",control:h.jsx(te,{})}),v.json&&h.jsx(ee,{value:"json",label:"Export to JSON",control:h.jsx(te,{})}),D(),v.xml&&h.jsx(ee,{value:"xml",label:"Export to XML",control:h.jsx(te,{})}),v.sql&&h.jsx(ee,{value:"sql",label:"Export to SQL",control:h.jsx(te,{})}),v.delete&&h.jsx(ee,{value:"delete",label:"Delete permanently",control:h.jsx(te,{})})]}),h.jsx(ge,{variant:"contained",onClick:()=>{switch(j){case"pdf":P();break;case"csv":f();break;case"json":i();break;case"excel":break;case"xml":E();break;case"sql":I();break;case"delete":T(!0);break}},disabled:w.length===0,children:"Apply"})]})})]})}),h.jsx(Rt,{title:"Delete selected row?",message:"Are you sure you want to delete the selected row? This action cannot be undone!",open:d,setOpen:T,onConfirm:()=>{q()}})]})},Rn=({table:e,metaData:t,appId:a,dbs:u,tbl:l,refetch:v,showForm:y})=>{Y.debug(t,a,l);const s=Pe(T=>yt(T,a));Y.debug("storeTableSettings",s);const j=Pe(T=>bt(T,a));Y.debug("bulkActions",j);let c=!1;for(const T in j)c=c||j[T]===!0;Y.debug("bulkActionsEnabled",c);const d=!jt(t)&&!t.table_type.toLowerCase().includes("view")&&c;return Y.debug("hasBulkActions",d),h.jsxs(ve,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px",alignItems:"center"},className:"ppToolbarButtons",children:[h.jsx(ht,{arrow:!0,title:"Refresh Table",className:"ppToolbarRefreshIcon",children:h.jsx(Lt,{onClick:()=>v(),children:h.jsx(Tt,{})})}),s.transactions.insert&&h.jsx(ge,{variant:"contained",startIcon:h.jsx(St,{}),onClick:()=>{y(null,xt.INSERT)},children:"New Record"}),d&&h.jsx(on,{table:e,appId:a,dbs:u,tbl:l,metaData:t,bulkActions:j,refetch:v})]})};export{Rn as default};
